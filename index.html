<!DOCTYPE html>
<html>
<head>
    <title>PDF Preview</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcode.js/1.5.1/qrcode.min.js"></script>
    <style>
        #pdf-preview { border: 1px solid #ddd; margin-bottom: 20px }
        #qrcode { display: inline-block; padding: 15px; background: white }
        .container { max-width: 800px; margin: 0 auto }
    </style>
</head>
<body>
    <div class="container">
        <h1>PDF在线预览</h1>
        <div id="pdf-preview"></div>
        <div id="qrcode"></div>
    </div>

    <script>
        // 获取PDF文件名
        const urlParams = new URLSearchParams(window.location.search);
        const pdfFile = urlParams.get('pdf') || 'document.pdf';

        // 渲染PDF
        pdfjsLib.getDocument(pdfFile).promise.then(pdf => {
            pdf.getPage(1).then(page => {
                const scale = 1.5;
                const viewport = page.getViewport({ scale });
                const canvas = document.createElement('canvas');
                const context = canvas.getContext('2d');
                canvas.height = viewport.height;
                canvas.width = viewport.width;
                document.getElementById('pdf-preview').appendChild(canvas);

                page.render({
                    canvasContext: context,
                    viewport
                });
            });
        });

        // 生成二维码
        new QRCode(document.getElementById('qrcode"), {
            text: window.location.href,
            width: 200,
            height: 200
        });
    </script>
</body>
</html>
